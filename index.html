<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Pong ++</title>
<style>
    body {
        background: #000;
        margin: 0;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        color: white;
        font-family: Arial;
    }

    #score {
        position: absolute;
        top: 20px;
        font-size: 36px;
        font-weight: bold;
    }
</style>
</head>
<body>

<canvas id="gameCanvas" width="900" height="600"></canvas>
<div id="score">0 - 0</div>

<script>
// =========================================================
//                   VARIABLES PRINCIPALES
// =========================================================

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let playerY = canvas.height / 2 - 50;
let computerY = canvas.height / 2 - 50;

let paddleHeight = 100;
let paddleWidth = 12;

let ballX = canvas.width / 2;
let ballY = canvas.height / 2;
let ballSize = 12;

let ballSpeedX = 6;
let ballSpeedY = 6;

let playerScore = 0;
let computerScore = 0;

let gameRunning = true;
let gameOver = false;

// =========================================================
//                    INPUT JOUEUR
// =========================================================
document.addEventListener("mousemove", (e) => {
    playerY = e.clientY - canvas.offsetTop - paddleHeight / 2;
});

// =========================================================
//                   CHECK GAME OVER
// =========================================================

function checkWinner() {
    if (playerScore >= 20) {
        gameRunning = false;
        gameOver = true;
        alert("ðŸŽ‰ YOU WIN !");
        return true;
    }

    if (computerScore >= 20) {
        gameRunning = false;
        gameOver = true;
        alert("ðŸ’€ YOU LOSE !");
        return true;
    }

    return false;
}

// =========================================================
//                     RESET BALL
// =========================================================
function resetBall() {
    ballX = canvas.width / 2;
    ballY = canvas.height / 2;

    // Change de direction vers le joueur
    ballSpeedX = -ballSpeedX;
    ballSpeedY = (Math.random() * 6) - 3;
}

// =========================================================
//                UPDATE â€“ LOGIQUE DU JEU
// =========================================================

function update() {
    if (!gameRunning || gameOver) return;

    // DÃ©placement balle
    ballX += ballSpeedX;
    ballY += ballSpeedY;

    // Collision mur haut / bas
    if (ballY <= 0 || ballY + ballSize >= canvas.height) {
        ballSpeedY *= -1;
    }

    // Paddle joueur
    if (
        ballX <= paddleWidth &&
        ballY + ballSize >= playerY &&
        ballY <= playerY + paddleHeight
    ) {
        ballSpeedX *= -1;
    }

    // Paddle IA
    if (
        ballX + ballSize >= canvas.width - paddleWidth &&
        ballY + ballSize >= computerY &&
        ballY <= computerY + paddleHeight
    ) {
        ballSpeedX *= -1;
    }

    // IA basique
    if (computerY + paddleHeight / 2 < ballY) computerY += 4;
    else computerY -= 4;

    // -------------------------------------------------------
    //             SCORE + FIX DU GAME OVER
    // -------------------------------------------------------

    if (ballX < 0) {
        computerScore++;

        // STOP le jeu immÃ©diatement si lâ€™IA gagne
        if (checkWinner()) return;

        resetBall();
    }

    if (ballX > canvas.width) {
        playerScore++;

        if (checkWinner()) return;

        resetBall();
    }

    // Afficher score
    document.getElementById("score").innerText =
        playerScore + " - " + computerScore;
}

// =========================================================
//                     RENDER VISUEL
// =========================================================

function render() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Fond noir
    ctx.fillStyle = "black";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Joueur
    ctx.fillStyle = "white";
    ctx.fillRect(0, playerY, paddleWidth, paddleHeight);

    // IA
    ctx.fillRect(canvas.width - paddleWidth, computerY, paddleWidth, paddleHeight);

    // Balle
    ctx.fillRect(ballX, ballY, ballSize, ballSize);
}

// =========================================================
//                        GAME LOOP
// =========================================================

function gameLoop() {
    update();
    render();

    if (!gameOver) requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>


